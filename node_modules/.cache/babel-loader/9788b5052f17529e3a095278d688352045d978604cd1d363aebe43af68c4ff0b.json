{"ast":null,"code":"import _regeneratorRuntime from\"/Users/prafulkoppalkar/Desktop/Repos/hyperswitch-demo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/prafulkoppalkar/Desktop/Repos/hyperswitch-demo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/prafulkoppalkar/Desktop/Repos/hyperswitch-demo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./style.css';import React,{useEffect,useState}from\"react\";import{PaymentElement,useElements}from\"@juspay-tech/react-hyper-js\";import{useHyper}from\"@juspay-tech/react-hyper-js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SDK(_ref){var options1=_ref.options1,layput=_ref.layput;// console.log\nvar stripe=useHyper();var elements=useElements();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$stripe$confirm,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(\"ELEMENTS\",elements);e.preventDefault();if(!(!stripe||!elements)){_context.next=4;break;}return _context.abrupt(\"return\");case 4:setIsLoading(true);_context.next=7;return stripe.confirmPayment({elements:elements,confirmParams:{// Make sure to change this to your payment completion page\nreturn_url:\"https://hyperswitch-demo-lemon-sqweezy-studio.netlify.app/\"}});case 7:_yield$stripe$confirm=_context.sent;error=_yield$stripe$confirm.error;console.log(\"ERORR\",error);// This point will only be reached if there is an immediate error when\n// confirming the payment. Otherwise, your customer will be redirected to\n// your `return_url`. For some payment methods like iDEAL, your customer will\n// be redirected to an intermediate site first to authorize the payment, then\n// redirected to the `return_url`.\nif(error.type===\"card_error\"||error.type===\"validation_error\"){setMessage(error.message);}else{if(error.message){setMessage(error.message);}else{setMessage(\"An unexpected error occurred.\");}}setIsLoading(false);case 12:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){if(!stripe){return;}var clientSecret=new URLSearchParams(window.location.search).get(\"order_id\");if(!clientSecret){return;}stripe.retrievePaymentIntent(clientSecret).then(function(_ref3){var paymentIntent=_ref3.paymentIntent;console.log(\"inisde effect\",paymentIntent);switch(paymentIntent.status){case\"succeeded\":setMessage(\"Payment succeeded!\");break;case\"processing\":setMessage(\"Your payment is processing.\");break;case\"requires_payment_method\":setMessage(\"Your payment was not successful, please try again.\");break;default:setMessage(\"Something went wrong.\");break;}});},[stripe]);console.log(\"heyy\",message);var ui=/*#__PURE__*/_jsx(PaymentElement,{id:\"paymentElement\",options:options1});return/*#__PURE__*/_jsx(\"div\",{className:\"SDK\",children:/*#__PURE__*/_jsx(\"form\",{id:\"payment-form\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{id:\"payment-form\",children:[ui,/*#__PURE__*/_jsx(\"button\",{id:\"submit\",type:\"submit\",className:\"checkoutButton\",children:true?/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",id:\"spinner\"}):/*#__PURE__*/_jsx(\"span\",{id:\"button-text\",children:\"Pay $20.00\"})}),message&&/*#__PURE__*/_jsx(\"div\",{id:\"payment-message\",children:message})]})})});}","map":{"version":3,"names":["React","useEffect","useState","PaymentElement","useElements","useHyper","SDK","options1","layput","stripe","elements","message","setMessage","isLoading","setIsLoading","handleSubmit","e","console","log","preventDefault","confirmPayment","confirmParams","return_url","error","type","clientSecret","URLSearchParams","window","location","search","get","retrievePaymentIntent","then","paymentIntent","status","ui"],"sources":["/Users/prafulkoppalkar/Desktop/Repos/hyperswitch-demo/src/components/SDK.jsx"],"sourcesContent":["import './style.css';\nimport React, { useEffect, useState } from \"react\";\nimport {\n  PaymentElement, useElements, \n} from \"@juspay-tech/react-hyper-js\";\nimport { useHyper } from \"@juspay-tech/react-hyper-js\";\n\nexport default function SDK({options1, layput}) {\n    // console.log\n    const stripe = useHyper()\n    const elements = useElements()\n    const [message, setMessage] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n    const handleSubmit = async (e) => {\n        console.log(\"ELEMENTS\", elements)\n        e.preventDefault();\n        if (!stripe || !elements) {\n          // Stripe.js has not yet loaded.\n          // Make sure to disable form submission until Stripe.js has loaded.\n          return;\n        }\n        setIsLoading(true);\n        const { error } = await stripe.confirmPayment({\n          elements,\n          confirmParams: {\n            // Make sure to change this to your payment completion page\n            return_url: \"https://hyperswitch-demo-lemon-sqweezy-studio.netlify.app/\",\n          },\n        });\n        console.log(\"ERORR\", error)\n    \n        // This point will only be reached if there is an immediate error when\n        // confirming the payment. Otherwise, your customer will be redirected to\n        // your `return_url`. For some payment methods like iDEAL, your customer will\n        // be redirected to an intermediate site first to authorize the payment, then\n        // redirected to the `return_url`.\n        if (error.type === \"card_error\" || error.type === \"validation_error\") {\n            setMessage(error.message);\n        }\n        else {\n            if (error.message) {\n                setMessage(error.message);\n            } else {\n                setMessage(\"An unexpected error occurred.\");\n            }\n        }\n      \n        setIsLoading(false);\n      };\n      useEffect(() => {\n        if (!stripe) {\n          return;\n        }\n    \n        const clientSecret = new URLSearchParams(window.location.search).get(\n          \"order_id\"\n        );\n    \n        if (!clientSecret) {\n          return;\n        }\n    \n        stripe.retrievePaymentIntent(clientSecret).then(({ paymentIntent }) => {\n          console.log(\"inisde effect\", paymentIntent);\n          switch (paymentIntent.status) {\n            case \"succeeded\":\n              setMessage(\"Payment succeeded!\");\n              break;\n            case \"processing\":\n              setMessage(\"Your payment is processing.\");\n              break;\n            case \"requires_payment_method\":\n              setMessage(\"Your payment was not successful, please try again.\");\n              break;\n            default:\n              setMessage(\"Something went wrong.\");\n              break;\n          }\n        });\n      }, [stripe]);\n      console.log(\"heyy\",message);\n      var ui = <PaymentElement id=\"paymentElement\" options={options1} />;\n    return (\n        <div className=\"SDK\">\n            <form id=\"payment-form\" onSubmit={handleSubmit}>\n                <div id=\"payment-form\">\n                {ui}\n                <button id=\"submit\" type=\"submit\" className=\"checkoutButton\" >\n          {true ? <div className=\"spinner\" id=\"spinner\"></div> : <span id=\"button-text\">Pay $20.00</span>}\n        </button>\n      {message && <div id=\"payment-message\">{message}</div>}\n      </div>\n      </form>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}